<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	<title>嘟嘟音乐网站</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="./css/jquery.mCustomScrollbar.css" rel="stylesheet" />
	<script src="./js/vue.js"></script>
	<script type="text/javascript" src="./js/jquery.js"></script>
	<script type="text/javascript" src="./js/router.js"></script>
	<script src="./js/jquery.mCustomScrollbar.concat.min.js"></script>
	<script src="./js/player.js"></script>
	<script src="./js/musiclist.js"></script>
	<link rel="stylesheet" type="text/css" href="./css/index.css">
	<link rel="stylesheet" type="text/css" href="./css/screen.css">
	<!-- <link rel="stylesheet" type="text/css" href="./css/bootstrap.min.css">
	<script type="text/javascript" src="./js/bootstrap.min.js"></script> -->
</head>
<body>
	<div id="bg">
		<img src="./img/partedclouds.jpg" alt="" />
	</div>
	<div id="singer_bg" style="position:fixed;top:0px;left:0px;width:100%;height:100%;z-index:-5;">
		<img id="singer_bg_img" src="https:\/\/y.gtimg.cn\/music\/photo_new\/T002R300x300M000001fmWDH4I0aBK.jpg?max_age=2592000" style="width:100%;height:100%;" />
	</div>
	<div id="app" >
		<div id="top">
			<div @click="home()" id="app_top">
				嘟嘟音乐网站
			</div>
			<div id="login">
				<i style="width:32px;height:32px;background:url('img/login.png');display:block;cursor:pointer;"></i>
			</div>
		</div>
		<div id="app_top_less">
			<div @click="go('lrc')" class="app_item">正在播放</div>
			<div @click="go('music')" class="app_item">播放列表</div>
			<div @click="go('album')" class="app_item">热门榜单</div>
			<div @click="go('search')" class="app_item">搜索</div>
		</div>
		<div id="panel" class="container">
			<router-view></router-view>
		</div>
		<audio src="" id="audio" src="" autobuffer style="display:hidden;"></audio>
	</div>
	<div id="panel_login_container" style="width:100%;height:100%;background:url('img/bg_empty.png');position:fixed;top:0px;left:0px;display:none;">
		<div id="panel_login" style="width:500px;height:350px;background:white;border-radius:10px;overflow:hidden;">
			<div class="login_top" style="width:100%;height:45px;border-bottom:1px solid #c6b8b8;font-size:18px;line-height:45px;padding:0px 15px;">登陆</div>
			<div class="username" style="width:100%;height:50px;margin-top:30px;">
				<div style="width:350px;height:40px;margin:0px auto;display:flex;overflow:hidden;">
					<div style="width:40px;height:40px;background:gray;display:flex;"><img src="img/username.png" style="display:block;margin:4px auto;" /></div><input style="width:310px;height:36px;" type="text" placeholder="请输入账号" />
				</div>
			</div>
			<div class="username" style="width:100%;height:50px;margin-top:30px;">
				<div style="width:350px;height:40px;margin:0px auto;display:flex;overflow:hidden;">
					<div style="width:40px;height:40px;background:gray;display:flex;"><img src="img/password.png" style="display:block;margin:4px auto;" /></div><input style="width:310px;height:36px;" type="password" placeholder="请输入密码" />
				</div>
			</div>
			<div style="width:100%;height:50px;margin-top:30px;">
				<div style="width:350px;height:40px;margin:0px auto;display:flex;overflow:hidden;">
					<div id="login" class="btn" style="width:150px;height:35px;line-height:35px;font-size:13px;">登陆</div>
					<div id="regist" class="btn" style="width:150px;height:35px;line-height:35px;font-size:13px;margin-left:50px;">注册</div>
				</div>
			</div>
		</div>
	</div>
</body>
<script type="text/javascript" src="./js/home.template.js"></script>
<script type="text/javascript" src="./js/list.template.js"></script>
<script type="text/javascript" src="./js/hot.template.js"></script>
<script type="text/javascript" src="./js/search.template.js"></script>
<script type="text/javascript" src="./js/album.template.js"></script>
<script type="text/javascript" src="./js/music.template.js"></script>
<script type="text/javascript" src="./js/lrc.template.js"></script>
<script type="text/javascript" src="./js/version.js"></script>
<script type="text/javascript">
	var width = $(document).width()
	var height = $(document).height()

	var player = new Player(document.getElementById("audio") , {}) 
	var storage = window.localStorage["list"]
	if(storage){
		storage = JSON.parse(storage)
		for(var i in storage){
			player.add(storage[i])
		}
	}
	var routes = [
		{path:"/" , component:home} ,
		{path:"/music" , component:music} ,
		{path:"/album" , component:album,} ,
		{path:"/list" , name:"list" , component:list } ,
		{path:"/hot"  , component:hot } ,
		{path:"/search"  , component:search } ,
		{path:"/lrc"  , component:lrc } 
	]

	var router = new VueRouter({
	  	routes: routes
	})

	router.beforeEach(function(to, from, next){
		if(width < 700){
			if(to.path == "/"){
				return 
			}
		}
		next()
	})

	var app = new Vue({
		el:"#app" ,
		data:{
			width:width ,
			height:height 
		},
		methods:{
			home:function(){
				this.$router.push("/")
			} ,
			go:function(msg){
				this.$router.push(msg)
			}
		} ,
		router:router
	})

	if(width < 700){
		if(app.$route.path == "/"){
			app.$router.push("/music")
		}
	}

	window.onresize = function(){
		width = $(document).width()
		height = $(document).height()
		app.$data.width = width
		app.$data.height = height

		if(width < 700){
			if(app.$route.path == "/"){
				app.$router.push("/music")
			}
		}
	}

	$("#login i").click(function(){
		$("#panel_login").css("margin-top" , (height - 350)/2 + 'px')
		$("#panel_login").css("margin-left" , (width - 500)/2 + 'px')
		$("#panel_login_container").css("display" , "block")
	})

	$("#panel_login_container").click(function(){
		$("#panel_login_container").css("display" , "none")
	})

	$("#panel_login").click(function(event){
		event.stopPropagation();
	})
</script>
</html>