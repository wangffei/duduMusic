<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>歌曲列表</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../layui/layui/css/layui.css" media="all">
    <style type="text/css">
      *{margin:0px;padding:0px;}
      html,body{width:100%;height:100%;}
    .demo-carousel{height: 200px; line-height: 200px; text-align: center;}
    </style>
  </head>

  <body>
   
    <table id="demo" lay-filter="test"></table>
     
    <script src="../layui/layui/layui.all.js"></script>
    <script>
    var $ = layui.jquery ;
    var height = $(document).height()
    layui.use('table', function(){
      var table = layui.table;
      
      //第一个实例
      table.render({
        elem: '#demo'
        ,height:height-50
        ,loading:true
        ,url: '/api/my_music' //数据接口
        //,page: true //开启分页
        ,toolbar: 'default' //开启工具栏，此处显示默认图标，可以自定义模板，详见文档
        ,totalRow: true //开启合计行
        ,title: '用户数据表'
        ,cols: [[ //表头
          {type: 'checkbox', fixed: 'left'}
          ,{field: 'id', title: 'ID', width:80}
          ,{field: 'song', title: '歌曲'}
          ,{field: 'album', title: '专辑'}
          ,{field: 'singer', title: '歌手'} 
        ]]
      });

      //头工具栏事件
      table.on('toolbar(test)', function(obj){
        var checkStatus = table.checkStatus(obj.config.id);
        var data = checkStatus.data;    // 选中的数据
        switch(obj.event){
          case 'add':
            layer.msg('添加');
          break;
          case 'delete':
            if(data.length === 0){
              layer.msg("请选择一行");
            } else{
              layer.msg('删除');
            }
          break;
          case 'update':
            if(data.length === 0){
              layer.msg("请选择一行");
            } else if(data.length > 1){
              layer.msg("只能同时编辑一个");
            } else{
              layer.alert("编辑[id]:" + checkStatus.data[0].id);
            }
          break;
        };
      });  
    });
    </script>
  </body>
</html>